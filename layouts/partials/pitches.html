<div style="display: flex; flex-direction: row; flex-wrap: wrap;">
	{{range $inningIndex, $inningElement := .Params.innings }}
		<span class="pitchThird" name="{{ $inningElement.game }}">
			<h3 class="inningName"><center>{{ $inningElement.name }}</center></h3>
			{{range $index, $element := $inningElement.batters}}
				<div class="oneAB" onclick="createGif([{{ range $this_pitch := $element.pitch }}{{ if ne $this_pitch.ptype 0}}[{{ $this_pitch.ptype }},{{ $this_pitch.xcoord }},{{ $this_pitch.ycoord }},{{ $this_pitch.pfx }},{{ $this_pitch.pfz }},{{ $this_pitch.strike }},{{ $this_pitch.swing }} ],{{ end }}{{ end}}]);" name="{{ $element.outs }}{{ $element.runners }}{{ $element.inning }}{{ $element.bid }}">
					<div style="display: flex;">
						<div style="flex: 5;">
							{{ $element.name }}
						</div>
						<div style="flex: 10;">
							<div style="display:flex;">
								{{range $i := $element.pitch}}
								{{if ne $i.ptype 0 }}
									<div style="flex: 1;">
										<img src="/images/pitch{{ $i.ptype }}{{ $i.strike }}{{ $i.swing }}.png">
									</div>
								{{ end }}
								{{if eq $i.ptype 0 }}
									<div style="flex: 1;"></div>
								{{ end }}
								{{ end }}
							</div>
							<div style="display: flex; flex-direction: row; flex-wrap: nowrap;">
								<div style="flex: 1;">
									<img src="/images/bases{{ $element.runners }}.png">
								</div>
								
								<div style="flex: 1; display: inline-block; position: relative;">
									<span class="helper"></span>
									<span style="vertical-align: middle; display: inline-block; float: left;"><img src="/images/outs{{ $element.outs }}.png" style="vertical-align: middle;"></span>
								</div>
								<div style="flex: 3;">
									{{ $element.result }}
								</div>
							</div>
						</div>
					</div>
				</div>
			{{ end }}

		</span>
    {{ end }}
</div>
    <script>
    	var query = window.location.search.substring(1);
    	var allParams = query.split('&');
    	var gameID = "0";
    	var outs = "012";
    	var runners = "01234567";
    	var batterID = "";
    	var innings = "0123456789";
    	for (i=0;i<allParams.length;i++){
    		var twoParts = allParams[i].split('=');
    		if (twoParts[0] == "game") {
    			gameID = twoParts[1];
    		}
    		else if (twoParts[0] == "outs") {
    			outs = twoParts[1];
    		}
    		else if (twoParts[0] == "runners") {
    			runners = twoParts[1];
    		}
    		else if (twoParts[0] == "innings") {
    			innings = twoParts[1];
    		}
    		else if (twoParts[0] == "bid") {
    			batterID = twoParts[1];
    		}
    		
    	}
		if (outs == "012" && runners == "01234567" && batterID == "" && innings == "0123456789") {

			var allInnings = document.getElementsByClassName("pitchThird");
			
			for (i=0;i<allInnings.length;i++) {

				if (allInnings.item(i).getAttribute("name")== gameID || gameID == "0") {
					allInnings.item(i).style.display = "inline-block";
				}
				else {
					allInnings.item(i).style.display = "none";
				}
			}
			var allABs = document.getElementsByClassName("oneAB");
			for (i=0;i<allABs.length;i++) {
				allABs.item(i).style.display = "inline-block";
			}
			var allABs = document.getElementsByClassName("inningName");
			for (i=0;i<allABs.length;i++) {
				allABs.item(i).style.display = "inline-block";
			}
    	}
    	else if (batterID != ""){
    		var allInns = document.getElementsByClassName("inningName");
			for (i=0;i<allInns.length;i++) {
				allInns.item(i).style.display = "none";
			}
			
    		var allInnings = document.querySelectorAll(".pitchThird");
			for (i=0;i<allInnings.length;i++) {
				allInnings.item(i).style.display = "none";

				var allABs = allInnings.item(i).querySelectorAll(".oneAB");
				for (ii=0;ii<allABs.length;ii++) {
					if ( batterID == allABs.item(ii).getAttribute("name").substring(3,allABs.item(ii).getAttribute("name").length)) {
						allABs.item(ii).style.display = "inline-block";
						allInnings.item(i).style.display = "inline-block";
					}
					else {
						allABs.item(ii).style.display = "none";
					}
				}
				
			}
    	}
    	else {
    		var allInns = document.getElementsByClassName("inningName");
			for (i=0;i<allInns.length;i++) {
				allInns.item(i).style.display = "none";
			}
			
    		var allInnings = document.querySelectorAll(".pitchThird");
			for (i=0;i<allInnings.length;i++) {
				allInnings.item(i).style.display = "none";

				var allABs = allInnings.item(i).querySelectorAll(".oneAB");
				for (ii=0;ii<allABs.length;ii++) {
					if ( innings.indexOf(allABs.item(ii).getAttribute("name").substring(2,3)) > -1 && outs.indexOf(allABs.item(ii).getAttribute("name").substring(0,1)) > -1 && runners.indexOf(allABs.item(ii).getAttribute("name").substring(1,2)) > -1) {
						allABs.item(ii).style.display = "inline-block";
						allInnings.item(i).style.display = "inline-block";
					}
					else {
						allABs.item(ii).style.display = "none";
					}
				}
				
			}
    	}
    	
    </script>
    
